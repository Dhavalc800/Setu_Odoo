<odoo>

    <!-- Admin Full Access to Dashboard Overview -->
    <record id="rule_admin_see_all_dashboard" model="ir.rule">
        <field name="name">Admin See All</field>
        <field name="model_id" ref="setu_dialer.model_dashboard_overview"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_manager'))]"/>
    </record>

    <!-- Branch Manager See Own and Team Dashboard -->
    <record id="your_model_rule_branch_manager" model="ir.rule">
        <field name="name">Branch Manager: See Own and Subordinate Records</field>
        <field name="model_id" ref="setu_dialer.model_dashboard_overview"/>
        <field name="groups" eval="[(4, ref('sales_team_security.group_booking_branch_manager'))]"/>
        <field name="domain_force">
            ['|', ('user_id', '=', user.id), ('user_id.employee_id.parent_id.user_id', '=', user.id)]
        </field>
    </record>

    <!-- Normal User See Own Dashboard -->
    <record id="rule_user_see_own_dashboard" model="ir.rule">
        <field name="name">User See Own</field>
        <field name="model_id" ref="setu_dialer.model_dashboard_overview"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    </record>

    <record id="branch_assignment_rule_sales_manager" model="ir.rule">
        <field name="name">Branch Manager Assignment - Sales Manager</field>
        <field name="model_id" ref="setu_dialer.model_branch_manager_assignment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_manager')), (4, ref('sales_team.group_sale_salesman_all_leads'))]"/>
    </record>

    <record id="branch_manager_assignment_rule" model="ir.rule">
        <field name="name">Branch Manager: Access Own + Team Records</field>
        <field name="model_id" ref="setu_dialer.model_branch_manager_assignment"/>
        <field name="domain_force">[('branch_manager_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('sales_team_security.group_booking_branch_manager'))]"/>
    </record>
    
    <record id="branch_assignment_rule_sales_user" model="ir.rule">
        <field name="name">Branch Manager Assignment - Sales User</field>
        <field name="model_id" ref="setu_dialer.model_branch_manager_assignment"/>
        <field name="domain_force">[('call_by', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    </record>

    <record id="lead_closer_calling_rule_own" model="ir.rule">
        <field name="name">Lead Closer: Only Own Records</field>
        <field name="model_id" ref="model_lead_closer_calling"/>
        <field name="domain_force">[('closer_user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="lead_management_rule_admin" model="ir.rule">
        <field name="name">Lead Admin - See All Leads</field>
        <field name="model_id" ref="model_lead_management"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('setu_dialer.group_lead_admin'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="lead_management_rule_user" model="ir.rule">
        <field name="name">Lead User - See Own Leads</field>
        <field name="model_id" ref="model_lead_management"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('setu_dialer.group_lead_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Rule: Admins see all -->
    <record id="rule_pysical_meeting_admin_all" model="ir.rule">
        <field name="name">Pysical Meeting - Admins See All</field>
        <field name="model_id" ref="model_pysical_meeting"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('setu_dialer.group_pysical_meeting_admin'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>

    <record id="rule_physical_meeting_branch_manager_own_branch" model="ir.rule">
        <field name="name">Physical Meeting - Branch Manager Own Branch</field>
        <field name="model_id" ref="model_pysical_meeting"/>
        <field name="domain_force">[('user_id.employee_id.branch_id', '=', user.employee_id.branch_id.id)]</field>        
        <!-- <field name="domain_force">[('bdm_branch', '!=', False), ('bdm_branch', '=', user.employee_id.branch_id.id)]</field> -->
        <field name="groups" eval="[(4, ref('setu_dialer.group_pysical_meeting_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Rule: Users see only their own -->
    <record id="rule_pysical_meeting_user_own" model="ir.rule">
        <field name="name">Pysical Meeting - Users See Own</field>
        <field name="model_id" ref="model_pysical_meeting"/>
        <field name="domain_force">['|', ('meeting_user_id', '=', user.id), ('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('setu_dialer.group_pysical_meeting_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
</odoo>
